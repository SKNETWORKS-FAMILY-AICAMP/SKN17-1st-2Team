import streamlit as st
import pandas as pd
import numpy as np

st.set_page_config(page_title="ì „ê¸°ì°¨ í†µê³„ ëŒ€ì‹œë³´ë“œ", layout="wide")

# ------------------ ì‚¬ì´ë“œ ë©”ë‰´ ------------------
st.sidebar.title("ğŸ“Š ë©”ë‰´")
menu = st.sidebar.radio("ì´ë™í•  ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”", ["ì°¨ëŸ‰ ë“±ë¡ í†µê³„", "ì¶©ì „ì†Œ ì¸í”„ë¼", "FAQ ê²€ìƒ‰", "í†µê³„ ë¶„ì„"])

# ------------------ ì°¨ëŸ‰ ë“±ë¡ í†µê³„ ------------------
if menu == "ì°¨ëŸ‰ ë“±ë¡ í†µê³„":
    st.title("ğŸš— ì°¨ëŸ‰ ë“±ë¡ í†µê³„ ëŒ€ì‹œë³´ë“œ")
    st.markdown("ì°¨ëŸ‰ ë“±ë¡ í˜„í™©ì„ ì§€ì—­ê³¼ ê¸°ê°„ë³„ë¡œ ì‹œê°í™”í•©ë‹ˆë‹¤.")

    col1, col2, col3 = st.columns(3)
    with col1:
        region = st.selectbox("ì§€ì—­ ì„ íƒ", ["ì„œìš¸", "ê²½ê¸°", "ë¶€ì‚°", "ëŒ€êµ¬", "ê´‘ì£¼"])
    with col2:
        vehicle_type = st.selectbox("ì°¨ëŸ‰ ìœ í˜•", ["ìŠ¹ìš©", "í™”ë¬¼", "ìŠ¹í•©", "íŠ¹ìˆ˜"])
    with col3:
        car_type = st.selectbox("ì°¨ì¢…", ["ì „ê¸°", "ìˆ˜ì†Œ", "í•˜ì´ë¸Œë¦¬ë“œ", "ë‚´ì—°ê¸°ê´€"])

    year_range = st.slider("ê¸°ê°„ ì„ íƒ (ë…„ë„)", 2011, 2025, (2018, 2025))

    st.subheader("ğŸ“ˆ ë“±ë¡ ëŒ€ìˆ˜ ì¶”ì´ (ì˜ˆì‹œ ë°ì´í„°)")
    df = pd.DataFrame({
        "ì—°ë„": list(range(year_range[0], year_range[1] + 1)),
        "ë“±ë¡ëŒ€ìˆ˜": np.random.randint(10000, 50000, year_range[1] - year_range[0] + 1)
    })
    st.line_chart(df.set_index("ì—°ë„"))

    st.metric(label="ì´ ë“±ë¡ëŒ€ìˆ˜", value=f"{df['ë“±ë¡ëŒ€ìˆ˜'].sum():,} ëŒ€")
    st.metric(label="ì—°í‰ê·  ì¦ê°€ìœ¨", value=f"{df['ë“±ë¡ëŒ€ìˆ˜'].pct_change().mean()*100:.1f}%")

# ------------------ ì¶©ì „ì†Œ ì¸í”„ë¼ ------------------
elif menu == "ì¶©ì „ì†Œ ì¸í”„ë¼":
    st.title("ğŸ”Œ ì „ê¸°ì°¨ ì¶©ì „ì†Œ ì¸í”„ë¼")
    st.markdown("ì „êµ­ ì¶©ì „ì†Œ ìœ„ì¹˜ ë° ìš´ì˜ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.")

    col1, col2 = st.columns(2)
    with col1:
        selected_region = st.selectbox("ì§€ì—­", ["ì„œìš¸", "ê²½ê¸°", "ë¶€ì‚°", "ëŒ€ì „", "ì „êµ­"])
    with col2:
        charge_type = st.selectbox("ì¶©ì „ íƒ€ì…", ["ê¸‰ì†", "ì™„ì†", "ì´ˆê¸‰ì†"])

    st.subheader("ğŸ—ºï¸ ì§€ë„ ê¸°ë°˜ ì¶©ì „ì†Œ ìœ„ì¹˜ (ë”ë¯¸ ë°ì´í„°)")
    dummy_map_data = pd.DataFrame({
        'lat': [37.5665, 37.4563, 35.1796],
        'lon': [126.9780, 126.7052, 129.0756],
    })
    st.map(dummy_map_data)

    st.subheader("ğŸ” ì¶©ì „ì†Œ ëª©ë¡")
    st.table(pd.DataFrame({
        "ì¶©ì „ì†Œëª…": ["ì„œìš¸ì—­ ì¶©ì „ì†Œ", "ë¶€ì‚° ì„¼í„°", "ì¸ì²œ ë‚¨ë™"],
        "ì¶©ì „ê¸° ìˆ˜": [3, 5, 2],
        "ìš´ì˜ìƒíƒœ": ["ìš´ì˜ ì¤‘", "ì ê²€ ì¤‘", "ìš´ì˜ ì¤‘"]
    }))

# ------------------ FAQ ê²€ìƒ‰ ------------------
elif menu == "FAQ ê²€ìƒ‰":
    st.title("â“ FAQ ê²€ìƒ‰ ì‹œìŠ¤í…œ")
    st.markdown("ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ì„ ê²€ìƒ‰í•˜ê³  ë‹µë³€ì„ í™•ì¸í•˜ì„¸ìš”.")

    question = st.text_input("ë¬´ì—‡ì´ ê¶ê¸ˆí•œê°€ìš”?")
    category = st.selectbox("FAQ ì¹´í…Œê³ ë¦¬", ["ì „ì²´", "ì°¨ëŸ‰ ë“±ë¡", "ì¶©ì „ì†Œ", "ë³´ì¡°ê¸ˆ", "í™˜ê²½ê·œì œ"])

    if st.button("ê²€ìƒ‰"):
        st.subheader("ğŸ” ê²€ìƒ‰ ê²°ê³¼ (ì˜ˆì‹œ)")
        with st.expander("Q. ì „ê¸°ì°¨ ë³´ì¡°ê¸ˆì€ ì–¼ë§ˆë‚˜ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?"):
            st.write("A. ì§€ì—­ë³„ë¡œ ë‹¤ë¥´ë©° ìµœëŒ€ ì•½ 700ë§Œì›ê¹Œì§€ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
        with st.expander("Q. ì¶©ì „ì†Œ ê³ ì¥ì€ ì–´ë””ì— ì‹ ê³ í•˜ë‚˜ìš”?"):
            st.write("A. í™˜ê²½ë¶€ ë¬´ê³µí•´ì°¨ í†µí•©ëˆ„ë¦¬ì§‘ ë˜ëŠ” ê´€í•  ì§€ìì²´ì— ì‹ ê³ í•˜ì„¸ìš”.")

# ------------------ í†µê³„ ë¶„ì„ ìë¦¬ ------------------
elif menu == "í†µê³„ ë¶„ì„":
    st.title("ğŸ“Š í†µê³„ ë¶„ì„ (ë°ì´í„° ì—°ê²° ì˜ˆì •)")
    st.info("ë°ì´í„°ê°€ ì—°ê²°ë˜ë©´ ì•„ë˜ì— ë‹¤ì–‘í•œ ë¶„ì„ ì‹œê°í™”ê°€ í‘œì‹œë  ì˜ˆì •ì…ë‹ˆë‹¤.")

    st.markdown("ì˜ˆì‹œ ì°¨íŠ¸ ì˜ì—­ (í˜„ì¬ëŠ” ì„ì‹œ ë°ì´í„°)")
    df_demo = pd.DataFrame({
        "ì›”": pd.date_range("2025-01", periods=6, freq="M"),
        "ì „ê¸°ì°¨ ë“±ë¡": np.random.randint(500, 2000, size=6)
    })
    st.bar_chart(df_demo.set_index("ì›”"))

    st.warning("ğŸš§ ì´ ì˜ì—­ì€ ì¶”í›„ í†µê³„ ë¶„ì„ ìë£Œì™€ ì—°ë™ë©ë‹ˆë‹¤.")